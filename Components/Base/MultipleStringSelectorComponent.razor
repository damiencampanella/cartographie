@namespace BlazorFlowly.Components

<Select Mode="multiple"
        @bind-Values="@selectedValues"
        TItemValue="string"
		TItem="string"
        Style="@(WidthString())"
        DefaultValue="@ChoicesList[0]"
        Placeholder="Please select"
        EnableSearch
        AllowClear
        OnSelectedItemsChanged="OnSelectedItemChangedHandler">
        <SelectOptions>
			@foreach(var item in ChoicesList){
				<SelectOption TItemValue="string" TItem="string" Value=@item Label=@item />
			}
		</SelectOptions>
</Select>

@code {
    [Parameter]
    public int Width { get; set; } = 120;

    [Parameter]
    public List<string> ChoicesList { get; set; }

    [Parameter]
    public Action<IEnumerable<string>> SetSelectedString { get; set; }

    private IEnumerable<string> selectedValues;

    private void OnSelectedItemChangedHandler(IEnumerable<string> values){
        if(selectedValues != null){
            SetSelectedString.Invoke(selectedValues);
        } 
    }

    private string WidthString(){
        return $"width: {Width}px;";
    }
}